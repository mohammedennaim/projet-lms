{"ast":null,"code":"import _objectSpread from\"C:/Users/Youcode/Desktop/lms/projet-lms/FrontEnd/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{courseService}from'../services/courseService';import'./CourseForm.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CourseForm=_ref=>{let{course,onSave,onCancel,isEdit=false}=_ref;const[formData,setFormData]=useState({title:'',description:''});const[errors,setErrors]=useState({});const[loading,setLoading]=useState(false);// Initialize form data when course prop changes\nuseEffect(()=>{if(course&&isEdit){setFormData({title:course.title||'',description:course.description||''});}else{setFormData({title:'',description:''});}setErrors({});},[course,isEdit]);const validateForm=()=>{const newErrors={};// Title validation\nif(!formData.title.trim()){newErrors.title='Le titre est obligatoire';}else if(formData.title.trim().length<3){newErrors.title='Le titre doit contenir au moins 3 caractères';}else if(formData.title.trim().length>255){newErrors.title='Le titre ne peut pas dépasser 255 caractères';}// Description validation\nif(!formData.description.trim()){newErrors.description='La description est obligatoire';}else if(formData.description.trim().length<10){newErrors.description='La description doit contenir au moins 10 caractères';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear error for this field when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);try{let savedCourse;if(isEdit&&course){savedCourse=await courseService.updateCourse(course.id,formData);}else{savedCourse=await courseService.createCourse(formData);}if(onSave){onSave(savedCourse);}}catch(error){setErrors({submit:error.message||'Une erreur est survenue lors de la sauvegarde'});}finally{setLoading(false);}};const handleCancel=()=>{setFormData({title:'',description:''});setErrors({});if(onCancel){onCancel();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"course-form-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"course-form-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:isEdit?'Modifier le cours':'Nouveau cours'})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"course-form\",children:[errors.submit&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message submit-error\",children:errors.submit}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:\"Titre du cours *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:formData.title,onChange:handleInputChange,className:\"form-input \".concat(errors.title?'error':''),placeholder:\"Entrez le titre du cours\",maxLength:\"255\"}),errors.title&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.title}),/*#__PURE__*/_jsxs(\"small\",{className:\"form-hint\",children:[formData.title.length,\"/255 caract\\xE8res\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"form-label\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:formData.description,onChange:handleInputChange,className:\"form-textarea \".concat(errors.description?'error':''),placeholder:\"D\\xE9crivez le contenu et les objectifs du cours\",rows:\"6\"}),errors.description&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.description}),/*#__PURE__*/_jsxs(\"small\",{className:\"form-hint\",children:[\"Minimum 10 caract\\xE8res (\",formData.description.length,\" caract\\xE8res)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:\"btn btn-cancel\",disabled:loading,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner-small\"}),isEdit?'Modification...':'Création...']}):isEdit?'Modifier':'Créer'})]})]})]});};export default CourseForm;","map":{"version":3,"names":["React","useState","useEffect","courseService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CourseForm","_ref","course","onSave","onCancel","isEdit","formData","setFormData","title","description","errors","setErrors","loading","setLoading","validateForm","newErrors","trim","length","Object","keys","handleInputChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","savedCourse","updateCourse","id","createCourse","error","submit","message","handleCancel","className","children","onSubmit","htmlFor","type","onChange","concat","placeholder","maxLength","rows","onClick","disabled"],"sources":["C:/Users/Youcode/Desktop/lms/projet-lms/FrontEnd/src/components/CourseForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { courseService } from '../services/courseService';\r\nimport './CourseForm.css';\r\n\r\nconst CourseForm = ({ course, onSave, onCancel, isEdit = false }) => {\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: ''\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Initialize form data when course prop changes\r\n  useEffect(() => {\r\n    if (course && isEdit) {\r\n      setFormData({\r\n        title: course.title || '',\r\n        description: course.description || ''\r\n      });\r\n    } else {\r\n      setFormData({\r\n        title: '',\r\n        description: ''\r\n      });\r\n    }\r\n    setErrors({});\r\n  }, [course, isEdit]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    // Title validation\r\n    if (!formData.title.trim()) {\r\n      newErrors.title = 'Le titre est obligatoire';\r\n    } else if (formData.title.trim().length < 3) {\r\n      newErrors.title = 'Le titre doit contenir au moins 3 caractères';\r\n    } else if (formData.title.trim().length > 255) {\r\n      newErrors.title = 'Le titre ne peut pas dépasser 255 caractères';\r\n    }\r\n\r\n    // Description validation\r\n    if (!formData.description.trim()) {\r\n      newErrors.description = 'La description est obligatoire';\r\n    } else if (formData.description.trim().length < 10) {\r\n      newErrors.description = 'La description doit contenir au moins 10 caractères';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n\r\n    // Clear error for this field when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    \r\n    try {\r\n      let savedCourse;\r\n      \r\n      if (isEdit && course) {\r\n        savedCourse = await courseService.updateCourse(course.id, formData);\r\n      } else {\r\n        savedCourse = await courseService.createCourse(formData);\r\n      }\r\n      \r\n      if (onSave) {\r\n        onSave(savedCourse);\r\n      }\r\n    } catch (error) {\r\n      setErrors({\r\n        submit: error.message || 'Une erreur est survenue lors de la sauvegarde'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setFormData({\r\n      title: '',\r\n      description: ''\r\n    });\r\n    setErrors({});\r\n    if (onCancel) {\r\n      onCancel();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"course-form-container\">\r\n      <div className=\"course-form-header\">\r\n        <h2>{isEdit ? 'Modifier le cours' : 'Nouveau cours'}</h2>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"course-form\">\r\n        {errors.submit && (\r\n          <div className=\"error-message submit-error\">\r\n            {errors.submit}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"title\" className=\"form-label\">\r\n            Titre du cours *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleInputChange}\r\n            className={`form-input ${errors.title ? 'error' : ''}`}\r\n            placeholder=\"Entrez le titre du cours\"\r\n            maxLength=\"255\"\r\n          />\r\n          {errors.title && (\r\n            <span className=\"error-text\">{errors.title}</span>\r\n          )}\r\n          <small className=\"form-hint\">\r\n            {formData.title.length}/255 caractères\r\n          </small>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"description\" className=\"form-label\">\r\n            Description *\r\n          </label>\r\n          <textarea\r\n            id=\"description\"\r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={handleInputChange}\r\n            className={`form-textarea ${errors.description ? 'error' : ''}`}\r\n            placeholder=\"Décrivez le contenu et les objectifs du cours\"\r\n            rows=\"6\"\r\n          />\r\n          {errors.description && (\r\n            <span className=\"error-text\">{errors.description}</span>\r\n          )}\r\n          <small className=\"form-hint\">\r\n            Minimum 10 caractères ({formData.description.length} caractères)\r\n          </small>\r\n        </div>\r\n\r\n        <div className=\"form-actions\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleCancel}\r\n            className=\"btn btn-cancel\"\r\n            disabled={loading}\r\n          >\r\n            Annuler\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-primary\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <span className=\"loading-spinner-small\"></span>\r\n                {isEdit ? 'Modification...' : 'Création...'}\r\n              </>\r\n            ) : (\r\n              isEdit ? 'Modifier' : 'Créer'\r\n            )}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}